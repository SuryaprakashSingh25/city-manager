<div class="auth-container">
  <h2>Reset Password</h2>

  <form #resetForm="ngForm" (ngSubmit)="submit(resetForm)">

    <!-- New Password -->
    <div class="password-wrapper">
      <input
        [type]="showNewPassword ? 'text' : 'password'"
        placeholder="New Password"
        [(ngModel)]="newPassword"
        name="newPassword"
        required
        minlength="8"
        pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$"
        #newPassCtrl="ngModel"
      />
      <button type="button" class="toggle-btn" (click)="showNewPassword = !showNewPassword" tabindex="-1">
        {{ showNewPassword ? 'ğŸ™ˆ' : 'ğŸ‘ï¸' }}
      </button>
    </div>
    <div class="error" *ngIf="newPassCtrl.touched && newPassCtrl.invalid">
      <small *ngIf="newPassCtrl.errors?.['required']">Password is required.</small>
      <small *ngIf="newPassCtrl.errors?.['minlength']">Must be at least 8 characters.</small>
      <small *ngIf="newPassCtrl.errors?.['pattern']">
        Must include uppercase, lowercase, number, and special character.
      </small>
    </div>

    <!-- Confirm Password -->
    <div class="password-wrapper">
      <input
        [type]="showConfirmPassword ? 'text' : 'password'"
        placeholder="Confirm Password"
        [(ngModel)]="confirmPassword"
        name="confirmPassword"
        required
        #confirmPassCtrl="ngModel"
      />
      <button type="button" class="toggle-btn" (click)="showConfirmPassword = !showConfirmPassword" tabindex="-1">
        {{ showConfirmPassword ? 'ğŸ™ˆ' : 'ğŸ‘ï¸' }}
      </button>
    </div>
    <div class="error" *ngIf="confirmPassCtrl.touched && confirmPassword && confirmPassword !== newPassword">
      <small>Passwords do not match.</small>
    </div>

    <!-- Submit Button -->
    <button
      type="submit"
      [disabled]="
        resetForm.invalid ||
        !newPassword ||
        !confirmPassword ||
        confirmPassword !== newPassword
      ">
      Reset Password
    </button>
  </form>

  <a routerLink="/login">Back to Login</a>
</div>
